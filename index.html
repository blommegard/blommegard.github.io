
<!DOCTYPE HTML>
<html lang="en-GB">
<head>
	<meta charset="utf-8">
	<title>  Simon Blommegård</title>

	<meta name="author" content="Simon Blommegård">

<meta name="description" content="There are a lot of things to think about when it comes to the new architecture that apple calls arm64. Apple got a great transition guide including &hellip;"> <meta name="keywords" content="">

	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

	<link href="/atom.xml" rel="alternate" title="Simon Blommegård" type="application/atom+xml">
	<link rel="canonical" href="">
	<link href="/favicon.png" rel="shortcut icon">
	<link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
	<!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
	<script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
	
</head>



<body>
	<header id="header" class="inner"><h1><a href="/">Simon Blommegård</a></h1>
<span class="tagline"></span>
<nav id="main-nav"><ul>
	<li><a href="/">Blog</a></li>
	<li><a href="/about">About</a></li>
	<li><a href="/archives">Archives</a></li>
</ul>
</nav>
<nav id="mobile-nav">
	<div class="alignleft menu">
		<a class="button">Menu</a>
		<div class="container"><ul>
	<li><a href="/">Blog</a></li>
	<li><a href="/about">About</a></li>
	<li><a href="/archives">Archives</a></li>
</ul>
</div>
	</div>
</nav>


</header>

	<div id="content" class="inner">


    <article class="post">
	<header>
		<h2 class="title">
			
			<a href="/blog/2013/11/19/include-tgmath-dot-h/">
			
				#include &#8220;tgmath.h&#8221;</a>
		</h2>
		<div class="meta date">








  


<time datetime="2013-11-19T16:10:00-08:00" pubdate data-updated="true">Nov 19<span>th</span>, 2013</time></div>
	</header>
	<div class="entry-content">
		<p>There are a lot of things to think about when it comes to the new architecture that apple calls arm64. Apple got a <a href="https://developer.apple.com/library/ios/documentation/General/Conceptual/CocoaTouch64BitGuide/Introduction/Introduction.html">great transition guide</a> including the <a href="https://developer.apple.com/library/ios/documentation/General/Conceptual/CocoaTouch64BitGuide/Major64-BitChanges/Major64-BitChanges.html">size and alignment tables</a> for the different datatypes. This is a biggie, and you should be very carefull when going forward and code for both archirectures. One datatype I use a lot in my UI code is <code>CGFloat</code>, and I hope you do as well. :)</p>

<p>Until now I have always used <code>roundf()</code> and the other &ldquo;f-functions&rdquo; to round these values off. Now, however, when there is different underlying types we have to do this another way, a correct way. While reading the <a href="https://developer.apple.com/library/mac/documentation/cocoa/conceptual/Cocoa64BitGuide/Introduction/Introduction.html">64-Bit Transition Guide for Cocoa</a> (note, not the same as the Cocoa Touch above) I found out about the tgmath-header.</p>

<p><code>tgmath.h</code> includes a bunch of very usefull macros to make it easier working with different datatypes on different architectures. So, go ahead and <code>#include "tgmath.h""</code> and just use the <code>round()</code> macro instead! Naturally, it includes the other common math-related operations as well.</p>

		
		
	</div>

</article>


    <article class="post">
	<header>
		<h2 class="title">
			
			<a href="/blog/2013/11/15/custom-colored-status-bar-content-on-ios7/">
			
				Custom Colored Status Bar Content on iOS7</a>
		</h2>
		<div class="meta date">








  


<time datetime="2013-11-15T21:25:00-08:00" pubdate data-updated="true">Nov 15<span>th</span>, 2013</time></div>
	</header>
	<div class="entry-content">
		<p>As we all know the only two values of <code>UIStatusBarStyle</code> are <code>UIStatusBarStyleDefault</code> &amp; <code>UIStatusBarStyleLightContent</code>, the background behind the bar on the other hand can vary a lot nowadays. During the iOS7 redesign at <a href="http://wrapp.com">Wrapp</a> we found it hard to match our yellow and brown colors with the white or black status bar content.</p>

<p><img src="/images/StatusBarBlackWhite.png" width="640"></p>

<p>Me and <a href="http://dribbble.com/Gellermark">Marcus</a> started digging around for solutions and found the ivar <code>_statusBarWindow</code> on <a href="https://github.com/JaviSoto/iOS7-Runtime-Headers/blob/master/Frameworks/UIKit.framework/UIApplication.h#L22"><code>UIApplication</code></a>, yeah, yeah, I know it is private.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
</pre></td><td class='code'><pre><code class='objective-c'><span class='line'>  <span class="n">UIApplication</span> <span class="o">*</span><span class="n">app</span> <span class="o">=</span> <span class="p">[</span><span class="n">UIApplication</span> <span class="n">sharedApplication</span><span class="p">];</span>
</span><span class='line'>  <span class="n">UIWindow</span> <span class="o">*</span><span class="n">window</span> <span class="o">=</span> <span class="p">[</span><span class="n">app</span> <span class="nl">valueForKey:</span><span class="s">@&quot;statusBarWindow&quot;</span><span class="p">];</span>
</span><span class='line'>  <span class="k">if</span> <span class="p">(</span><span class="n">window</span> <span class="o">&amp;&amp;</span> <span class="p">[</span><span class="n">window</span> <span class="nl">isKindOfClass:</span><span class="p">[</span><span class="n">UIWindow</span> <span class="n">class</span><span class="p">]])</span> <span class="p">{</span>
</span><span class='line'>    <span class="n">UIImageView</span> <span class="o">*</span><span class="n">overlayImageView</span> <span class="o">=</span> <span class="p">[[</span><span class="n">UIImageView</span> <span class="n">alloc</span><span class="p">]</span> <span class="nl">initWithFrame:</span><span class="n">app</span><span class="p">.</span><span class="n">statusBarFrame</span><span class="p">];</span>
</span><span class='line'>    <span class="p">[</span><span class="n">overlayImageView</span> <span class="nl">setImage:</span><span class="p">[</span><span class="n">UIImage</span> <span class="nl">imageNamed:</span><span class="s">@&quot;Yellow Navigation Bar&quot;</span><span class="p">]];</span>
</span><span class='line'>    <span class="p">[</span><span class="n">overlayImageView</span> <span class="nl">setClipsToBounds:</span><span class="n">YES</span><span class="p">];</span>
</span><span class='line'>    <span class="p">[</span><span class="n">overlayImageView</span> <span class="nl">setContentMode:</span><span class="p">(</span><span class="n">UIViewContentModeScaleAspectFill</span><span class="p">)];</span>
</span><span class='line'>    <span class="p">[</span><span class="n">overlayImageView</span> <span class="nl">setAlpha:</span><span class="mf">.4f</span><span class="p">];</span>
</span><span class='line'>
</span><span class='line'>    <span class="p">[</span><span class="n">window</span> <span class="nl">addSubview:</span><span class="n">overlayImageView</span><span class="p">];</span>
</span><span class='line'>  <span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>I use the same image as the <code>UINavigationBar</code> background image, but clip it to the status bar frame and add it above the bar in the window. The result:</p>

<p><img src="/images/StatusBar.png" width="640"></p>

<p>If you got a translucent bar, there will be a little more work to match the colors. Another take on this may be to create anoter window, place it in front and add the overlay to that one. But then you have to dispatch all touch event from that one as well.</p>

<p>Another example of what you can do when you have a reference to the status bar window is translate it with the hamburger menu just like <a href="http://flyosity.com/interesting/">Interesting</a> does by <a href="http://twitter.com/flyosity">@flyosity</a></p>

<p>I’m <a href="http://twitter.com/blommegard">@blommegard</a> on Twitter, ping me with feedback!</p>

		
		
	</div>

</article>


</div>
	<footer id="footer" class="inner">&copy; 2013

    Simon Blommegård

</footer>
	<script src="/javascripts/slash.js"></script>
<script src="/javascripts/hyphenator.js"></script>







</body>
</html>
